<!DOCTYPE html><html lang="it" class="h-100"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>mathquiz</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin></script><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script><style>#domanda{user-select:all}</style></head><body class="d-flex flex-column h-100"> <main class="flex-shrink-0"> <div class="container"> <h1 class="fw-bold">mathquiz</h1> <h2 id="stato"></h2> <div id="links" class="mb-2"> <a id="inizia" href="" class="btn btn-primary mr-2">Inizia</a> <a id="ricomincia" href="" class="btn btn-secondary d-none mr-2">Ricomincia</a> <span class="timer"></span> </div> <div id="operazioni"></div> </div> </main> <footer class="bg-light footer mt-auto py-3"> <div class="container"> <span class="text-muted"> <span class="fw-bold">mathquiz</span> - test veloce su operazioni matematiche <span class="fw-bold">secondaria di primo grado</span> <div class="license mb-2"> autore <a href="mailto:antoniomolinari@me.com?subject=mathquiz">antoniomolinari@me.com</a> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Licenza Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a>  <br><a href="https://github.com/magnum/mathquiz" target="_blank">https://github.com/magnum/mathquiz</a> </div> <div class="links mb-2"> <a href="#" data-bs-toggle="modal" data-bs-target="#risorse">Altre risorse</a> </div> </span> </div> </footer>  <div class="modal" id="domanda" tabindex="-1" aria-labelledby="domandaLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5 class="modal-title" id="domandaLabel"></h5>  </div> <div class="modal-body"> <div class="content fs-1 mb-4"></div> <div class="mb-2"> <input type="number" class="form-control" id="risposta"> </div> <span class="timer"></span> </div> <div class="modal-footer">  <button id="conferma" type="button" class="btn btn-primary">Conferma</button> </div> </div> </div> </div>  <div class="modal" id="risorse" tabindex="-1" aria-labelledby="risorseLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-centered"> <div class="modal-content"> <div class="modal-header"> <h5 class="modal-title" id="risorseLabel">Altre risorse</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div> <div class="modal-body"> <ul> <li><a href="https://www.matika.in/it/#6" target="_blank">Matika</a></li> </ul> </div> <div class="modal-footer">  <button id="conferma" type="button" class="btn btn-primary">Conferma</button> </div> </div> </div> </div> <script>let ok=ko=0,numeroOperazioni=10,numeroMassimoSommeSottrazioni=100,numeroMassimoMoltipliceEDivisioni=3,secondiMaxPerOperazione=10,count,domanda=new bootstrap.Modal(document.getElementById("domanda"),{}),risultato,operatore;const operatori=["+","-","*","/"];let operazione,numero1,numero2,inizioTimer,timeoutInterval,timeoutTimer,domandaModal=new bootstrap.Modal(document.getElementById("domanda"),{});document.getElementById("inizia").addEventListener("click",(e=>{e.preventDefault(),setup()})),document.getElementById("ricomincia").addEventListener("click",(e=>{e.preventDefault(),ricomincia()})),document.getElementById("conferma").addEventListener("click",(e=>{e.preventDefault(),leggiRisposta()})),document.addEventListener("keyup",(e=>{e.key;13===e.keyCode&&(console.log("enter pressed"),document.getElementById("domanda").classList.contains("show")&&document.getElementById("conferma").click())}),!1);const setup=()=>{document.getElementById("inizia").classList.toggle("d-none"),setTimeout((()=>{numeroOperazioni=parseInt(window.prompt("quante operazioni vuoi?",numeroOperazioni))||numeroOperazioni,numeroMassimoSommeSottrazioni=parseInt(window.prompt("per + e - numeri grandi fino a...",numeroMassimoSommeSottrazioni))||numeroMassimoSommeSottrazioni,numeroMassimoMoltipliceEDivisioni=parseInt(window.prompt("per * e / secondo operatore < di...",numeroMassimoMoltipliceEDivisioni))||numeroMassimoMoltipliceEDivisioni,secondiMaxPerOperazione=parseInt(window.prompt("tempo massimo per operazione in secondi?",secondiMaxPerOperazione))||secondiMaxPerOperazione,inizia()}),100)},inizia=()=>{document.getElementById("inizia").classList.add("d-none"),document.getElementById("ricomincia").classList.remove("d-none"),count=numeroOperazioni,faiDomanda()},ricomincia=()=>{ok=ko=0,document.getElementById("inizia").classList.toggle("d-none"),document.getElementById("ricomincia").classList.toggle("d-none"),document.getElementById("operazioni").replaceChildren(""),inizia()},timerRisposta=()=>{fineTimer=moment().add(secondiMaxPerOperazione,"seconds"),timeoutInterval=setInterval((()=>{const e=`tempo rimanente ${moment(fineTimer-moment()).format("mm:ss")}s`;for(const o of document.getElementsByClassName("timer"))o.innerText=e}),100),timeoutTimer=setTimeout((()=>{document.getElementById("conferma").click(),clearInterval(timeoutInterval)}),1e3*secondiMaxPerOperazione)},calcolaRisultato=()=>{operazione=`${numero1}${operatore}${numero2}`,risultato=eval(operazione).toFixed(1)},faiDomanda=()=>{operatore=operatori[Math.floor(Math.random()*operatori.length)];const e=numeroMassimoSommeSottrazioni,o=-1!=["+","-"].indexOf(operatore)?numeroMassimoSommeSottrazioni:numeroMassimoMoltipliceEDivisioni;if(numero1=Math.round(Math.random()*e),numero2=Math.round(Math.random()*o),"/"==operatore&&numero1<numero2&&([numero1,numero2]=[numero2,numero1]),"/"==operatore){calcolaRisultato();risultato%1>0&&(numero2*=numero1%numero2),0==numero2&&(numero2=1)}calcolaRisultato(),document.querySelector("#domanda .content").innerText=operazione,document.querySelector("#risposta").value="",document.querySelector("#domandaLabel").innerText="Domanda "+(numeroOperazioni-count+1),document.getElementById("domanda").classList.contains("show")||domandaModal.show({backdrop:"static",keyboard:!0}),document.querySelector("#risposta").focus(),console.log(`${operazione} = ${risultato}`),clearTimeout(timeoutTimer),inizioTimer=moment(),timerRisposta()},leggiRisposta=()=>{const e=document.querySelector("#risposta").value;mostraRisposta(operazione,risultato,e),aggiornaStato(),count--,count>0?setTimeout((()=>faiDomanda()),0):domandaModal.hide(),clearTimeout(timeoutTimer),clearInterval(timeoutInterval)},mostraRisposta=(e,o,n)=>{let t="bg-success";parseFloat(n)==o?ok++:(ko++,t="bg-danger");const i=`\n        <div class="row mb-2">\n          <div class="col-12">${e} = <span class="badge ${t}">${n}</span></div>\n        </div>\n      `;document.getElementById("operazioni").insertAdjacentHTML("beforeend",i)},aggiornaStato=()=>{const e=(ok/numeroOperazioni*100).toFixed();document.getElementById("stato").innerText=`indovinate ${ok} su ${numeroOperazioni}, pari a ${e}%`};</script> </body></html>