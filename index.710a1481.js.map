{"mappings":"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","sources":["scripts.js"],"sourcesContent":["let ok = 0\nlet ko = 0;\nlet numeroOperazioni = 10;\nlet numeroMassimoSommeSottrazioni = 100;\nlet numeroMassimoMoltipliceEDivisioni = 10;\nlet secondiMaxPerOperazione = 10;\nlet count;\nlet domanda = new bootstrap.Modal(document.getElementById('domanda'), {});\nlet risultato;\nlet operatore;\nconst operatori = [\"+\",\"-\",\"*\",\"/\"];\n//const operatori = [\"/\"];\nlet operazione;\nlet numero1;\nlet numero2;\nlet inizioTimer;\nlet timeoutInterval;\nlet timeoutTimer;\nlet domandaModal = new bootstrap.Modal(document.getElementById('domanda'), {\n  backdrop: \"static\",\n  keyboard: false\n});\n\n\ndocument.getElementById(\"inizia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  setup();\n})\n\n\ndocument.getElementById(\"ricomincia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  ricomincia();\n})\n\n\ndocument.getElementById(\"conferma\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  leggiRisposta();\n})\n\n\ndocument.getElementById(\"negativo\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  let valore = document.getElementById(\"risposta\").value.toString();\n  valore = valore.indexOf(\"-\") != -1 ? valore.replace(\"-\",\"\") : `-${valore}`\n  console.log(valore)\n  document.getElementById(\"risposta\").value = parseInt(valore);\n})\n\n\ndocument.addEventListener('keyup', (event) => {\n  const keyName = event.key;\n  if (event.keyCode === 13) {\n    console.log(\"enter pressed\");\n    if(document.getElementById('domanda').classList.contains(\"show\")) document.getElementById(\"conferma\").click();\n  }\n}, false);\n\n\nconst setup = () => {\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  setTimeout(()=>{\n    numeroOperazioni = parseInt(window.prompt(\"quante operazioni vuoi?\", numeroOperazioni)) || numeroOperazioni;\n    numeroMassimoSommeSottrazioni = parseInt(window.prompt(\"per + e - numeri grandi fino a...\", numeroMassimoSommeSottrazioni)) || numeroMassimoSommeSottrazioni;\n    numeroMassimoMoltipliceEDivisioni = parseInt(window.prompt(\"per * e / secondo operatore < di...\", numeroMassimoMoltipliceEDivisioni)) || numeroMassimoMoltipliceEDivisioni;\n    secondiMaxPerOperazione = parseInt(window.prompt(\"tempo massimo per operazione in secondi?\", secondiMaxPerOperazione)) || secondiMaxPerOperazione;\n    inizia();\n  }, 100)\n}\n\n\nconst inizia = () => {\n  document.getElementById(\"inizia\").classList.add('d-none');\n  document.getElementById(\"ricomincia\").classList.remove('d-none');\n  count = numeroOperazioni;\n  faiDomanda();\n}\n\n\nconst ricomincia = () => {\n  ok = 0\n  ko = 0;\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  document.getElementById(\"ricomincia\").classList.toggle('d-none');\n  document.getElementById(\"operazioni\").replaceChildren(\"\");\n  inizia();\n}\n\nconst timerRisposta = () => {\n  let fineTimer = moment().add(secondiMaxPerOperazione, 'seconds');\n  timeoutInterval = setInterval(()=>{\n    const tempoRimanente = moment(fineTimer-moment()).format(\"mm:ss\");\n    const stingaTimer = `tempo rimanente ${tempoRimanente}s`;\n    for (const element of document.getElementsByClassName(\"timer\")){\n      element.innerText = stingaTimer;\n    }\n  }, 100)\n  timeoutTimer = setTimeout(()=>{\n    document.getElementById(\"conferma\").click();\n    clearInterval(timeoutInterval);\n  }, secondiMaxPerOperazione*1000)\n}\n\n\nconst calcolaRisultato = () => {\n  operazione = `${numero1}${operatore}${numero2}`;\n  risultato = eval(operazione).toFixed(1);\n}\n\nconst faiDomanda = () => {\n  operatore = operatori[Math.floor(Math.random()*operatori.length)];\n  const operatore1Massimo = numeroMassimoSommeSottrazioni;\n  const operatore2Massimo = [\"+\",\"-\"].indexOf(operatore) != -1 ? numeroMassimoSommeSottrazioni : numeroMassimoMoltipliceEDivisioni\n  numero1 = Math.round(Math.random()*operatore1Massimo);\n  numero2 = Math.round(Math.random()*operatore2Massimo);\n  //if([\"+\",\"-\",\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n  if([\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n    [numero1, numero2] = [numero2, numero1]\n  }\n  if(operatore == \"/\") {\n    calcolaRisultato();\n    const resto = risultato % 1;\n    if(resto > 0) {\n      numero1 = (numero1 % numero2)*numero2;\n    }\n    if(numero2==0) numero2 =1;\n  }\n  calcolaRisultato();\n  document.querySelector(\"#domanda .content\").innerText = operazione;\n  document.getElementById(\"risposta\").value = \"\";\n  document.querySelector(\"#domandaLabel\").innerText = `Domanda ${(numeroOperazioni-count)+1}`\n  if(!document.getElementById('domanda').classList.contains(\"show\")) domandaModal.show();\n  document.querySelector(\"#risposta\").focus();\n  console.log(`${operazione} = ${risultato}`);\n  clearTimeout(timeoutTimer);\n  inizioTimer = moment();\n  timerRisposta();\n}\n\n\nconst leggiRisposta = () => {\n  const risposta = document.querySelector(\"#risposta\").value;\n  mostraRisposta(operazione, risultato, risposta);\n  aggiornaStato();\n  count --;\n  if(count>0) {\n    setTimeout(() => faiDomanda(), 0);\n  } else {\n    domandaModal.hide();\n  }\n  clearTimeout(timeoutTimer);\n  clearInterval(timeoutInterval);\n}\n\n\nconst mostraRisposta = (operazione, risultato, risposta ) => {\n  let classeRisposta = \"bg-success\";\n  let suggerimenti = \"\";\n  if(parseFloat(risposta) == risultato){\n    ok ++;\n  } else {\n    ko ++;\n    classeRisposta = \"bg-danger\";\n    suggerimenti = ` ${risultato}`\n  }\n  const html = `\n    <div class=\"row mb-2\">\n      <div class=\"col-12 fs-4\">${operazione} = <span class=\"badge ${classeRisposta}\">${risposta}</span>${suggerimenti}</div>\n    </div>\n  `;\n  document.getElementById(\"operazioni\").insertAdjacentHTML('beforeend', html);\n}\n\n\nconst aggiornaStato = () => {\n  const percentuale = (ok/numeroOperazioni*100).toFixed()\n  document.getElementById(\"stato\").innerText = `indovinate ${ok} su ${numeroOperazioni}, pari a ${percentuale}%`;\n}"],"names":["ok","ko","numeroOperazioni","numeroMassimoSommeSottrazioni","numeroMassimoMoltipliceEDivisioni","secondiMaxPerOperazione","count","domanda","bootstrap","Modal","document","getElementById","risultato","operatore","operatori","operazione","numero1","numero2","inizioTimer","timeoutInterval","timeoutTimer","domandaModal","backdrop","keyboard","addEventListener","e","preventDefault","setup","ricomincia","leggiRisposta","valore","value","toString","indexOf","replace","console","log","parseInt","event","key","keyCode","classList","contains","click","toggle","setTimeout","window","prompt","inizia","add","remove","faiDomanda","replaceChildren","timerRisposta","fineTimer","moment","setInterval","stingaTimer","format","element","getElementsByClassName","innerText","clearInterval","calcolaRisultato","eval","toFixed","Math","floor","random","length","operatore1Massimo","operatore2Massimo","round","querySelector","show","focus","clearTimeout","risposta","mostraRisposta","aggiornaStato","hide","operazione1","risultato1","classeRisposta","suggerimenti","parseFloat","html","insertAdjacentHTML","percentuale"],"version":3,"file":"index.710a1481.js.map"}