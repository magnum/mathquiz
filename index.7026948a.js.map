{"mappings":"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","sources":["scripts.js"],"sourcesContent":["let ok = 0\nlet ko = 0;\nlet numeroOperazioni = 10;\nlet numeroMassimoSommeSottrazioni = 100;\nlet numeroMassimoMoltipliceEDivisioni = 10;\nlet secondiMaxPerOperazione = 10;\nlet count;\nlet domanda = new bootstrap.Modal(document.getElementById('domanda'), {});\nlet risultato;\nlet operatore;\nconst operatori = [\"+\",\"-\",\"*\",\"/\"];\n//const operatori = [\"/\"];\nlet operazione;\nlet numero1;\nlet numero2;\nlet inizioTimer;\nlet timeoutInterval;\nlet timeoutTimer;\nlet domandaModal = new bootstrap.Modal(document.getElementById('domanda'), {\n  backdrop: \"static\",\n  keyboard: false\n});\n\ndocument.getElementById(\"inizia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  setup();\n})\n\ndocument.getElementById(\"ricomincia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  ricomincia();\n})\n\ndocument.getElementById(\"conferma\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  leggiRisposta();\n})\n\n\ndocument.addEventListener('keyup', (event) => {\n  const keyName = event.key;\n  if (event.keyCode === 13) {\n    console.log(\"enter pressed\");\n    if(document.getElementById('domanda').classList.contains(\"show\")) document.getElementById(\"conferma\").click();\n  }\n}, false);\n\n\nconst setup = () => {\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  setTimeout(()=>{\n    numeroOperazioni = parseInt(window.prompt(\"quante operazioni vuoi?\", numeroOperazioni)) || numeroOperazioni;\n    numeroMassimoSommeSottrazioni = parseInt(window.prompt(\"per + e - numeri grandi fino a...\", numeroMassimoSommeSottrazioni)) || numeroMassimoSommeSottrazioni;\n    numeroMassimoMoltipliceEDivisioni = parseInt(window.prompt(\"per * e / secondo operatore < di...\", numeroMassimoMoltipliceEDivisioni)) || numeroMassimoMoltipliceEDivisioni;\n    secondiMaxPerOperazione = parseInt(window.prompt(\"tempo massimo per operazione in secondi?\", secondiMaxPerOperazione)) || secondiMaxPerOperazione;\n    inizia();\n  }, 100)\n}\n\n\nconst inizia = () => {\n  document.getElementById(\"inizia\").classList.add('d-none');\n  document.getElementById(\"ricomincia\").classList.remove('d-none');\n  count = numeroOperazioni;\n  faiDomanda();\n}\n\n\nconst ricomincia = () => {\n  ok = 0\n  ko = 0;\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  document.getElementById(\"ricomincia\").classList.toggle('d-none');\n  document.getElementById(\"operazioni\").replaceChildren(\"\");\n  inizia();\n}\n\nconst timerRisposta = () => {\n  let fineTimer = moment().add(secondiMaxPerOperazione, 'seconds');\n  timeoutInterval = setInterval(()=>{\n    const tempoRimanente = moment(fineTimer-moment()).format(\"mm:ss\");\n    const stingaTimer = `tempo rimanente ${tempoRimanente}s`;\n    for (const element of document.getElementsByClassName(\"timer\")){\n      element.innerText = stingaTimer;\n    }\n  }, 100)\n  timeoutTimer = setTimeout(()=>{\n    document.getElementById(\"conferma\").click();\n    clearInterval(timeoutInterval);\n  }, secondiMaxPerOperazione*1000)\n}\n\n\nconst calcolaRisultato = () => {\n  operazione = `${numero1}${operatore}${numero2}`;\n  risultato = eval(operazione).toFixed(1);\n}\n\nconst faiDomanda = () => {\n  operatore = operatori[Math.floor(Math.random()*operatori.length)];\n  const operatore1Massimo = numeroMassimoSommeSottrazioni;\n  const operatore2Massimo = [\"+\",\"-\"].indexOf(operatore) != -1 ? numeroMassimoSommeSottrazioni : numeroMassimoMoltipliceEDivisioni\n  numero1 = Math.round(Math.random()*operatore1Massimo);\n  numero2 = Math.round(Math.random()*operatore2Massimo);\n  //if([\"+\",\"-\",\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n  if([\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n    [numero1, numero2] = [numero2, numero1]\n  }\n  if(operatore == \"/\") {\n    calcolaRisultato();\n    const resto = risultato % 1;\n    if(resto > 0) {\n      numero1 = (numero1 % numero2)*numero2;\n    }\n    if(numero2==0) numero2 =1;\n  }\n  calcolaRisultato();\n  document.querySelector(\"#domanda .content\").innerText = operazione;\n  document.querySelector(\"#risposta\").value = \"\";\n  document.querySelector(\"#domandaLabel\").innerText = `Domanda ${(numeroOperazioni-count)+1}`\n  if(!document.getElementById('domanda').classList.contains(\"show\")) domandaModal.show();\n  document.querySelector(\"#risposta\").focus();\n  console.log(`${operazione} = ${risultato}`);\n  clearTimeout(timeoutTimer);\n  inizioTimer = moment();\n  timerRisposta();\n}\n\n\nconst leggiRisposta = () => {\n  const risposta = document.querySelector(\"#risposta\").value;\n  mostraRisposta(operazione, risultato, risposta);\n  aggiornaStato();\n  count --;\n  if(count>0) {\n    setTimeout(() => faiDomanda(), 0);\n  } else {\n    domandaModal.hide();\n  }\n  clearTimeout(timeoutTimer);\n  clearInterval(timeoutInterval);\n}\n\n\nconst mostraRisposta = (operazione, risultato, risposta ) => {\n  let classeRisposta = \"bg-success\";\n  let suggerimenti = \"\";\n  if(parseFloat(risposta) == risultato){\n    ok ++;\n  } else {\n    ko ++;\n    classeRisposta = \"bg-danger\";\n    suggerimenti = ` ${risultato}`\n  }\n  const html = `\n    <div class=\"row mb-2\">\n      <div class=\"col-12 fs-4\">${operazione} = <span class=\"badge ${classeRisposta}\">${risposta}</span>${suggerimenti}</div>\n    </div>\n  `;\n  document.getElementById(\"operazioni\").insertAdjacentHTML('beforeend', html);\n}\n\n\nconst aggiornaStato = () => {\n  const percentuale = (ok/numeroOperazioni*100).toFixed()\n  document.getElementById(\"stato\").innerText = `indovinate ${ok} su ${numeroOperazioni}, pari a ${percentuale}%`;\n}"],"names":["ok","ko","numeroOperazioni","numeroMassimoSommeSottrazioni","numeroMassimoMoltipliceEDivisioni","secondiMaxPerOperazione","count","domanda","bootstrap","Modal","document","getElementById","risultato","operatore","operatori","operazione","numero1","numero2","inizioTimer","timeoutInterval","timeoutTimer","domandaModal","backdrop","keyboard","addEventListener","e","preventDefault","setup","ricomincia","leggiRisposta","event","key","keyCode","console","log","classList","contains","click","toggle","setTimeout","parseInt","window","prompt","inizia","add","remove","faiDomanda","replaceChildren","timerRisposta","fineTimer","moment","setInterval","stingaTimer","format","element","getElementsByClassName","innerText","clearInterval","calcolaRisultato","eval","toFixed","Math","floor","random","length","operatore1Massimo","operatore2Massimo","indexOf","round","querySelector","value","show","focus","clearTimeout","risposta","mostraRisposta","aggiornaStato","hide","operazione1","risultato1","classeRisposta","suggerimenti","parseFloat","html","insertAdjacentHTML","percentuale"],"version":3,"file":"index.7026948a.js.map"}