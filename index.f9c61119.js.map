{"mappings":"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","sources":["scripts.js"],"sourcesContent":["let ok = 0\nlet ko = 0;\nlet numeroOperazioni = 10;\nlet numeroMassimoSommeSottrazioni = 100;\nlet numeroMassimoMoltipliceEDivisioni = 10;\nlet secondiMaxPerOperazione = 10;\nlet count;\nlet domanda = new bootstrap.Modal(document.getElementById('domanda'), {});\nlet risultato;\nlet operatore;\nconst operatori = [\"+\",\"-\",\"*\",\"/\"];\n//const operatori = [\"/\"];\nlet operazione;\nlet numero1;\nlet numero2;\nlet inizioTimer;\nlet timeoutInterval;\nlet timeoutTimer;\nlet domandaModal = new bootstrap.Modal(document.getElementById('domanda'), {\n  backdrop: \"static\",\n  keyboard: false\n});\n\ndocument.getElementById(\"inizia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  setup();\n})\n\ndocument.getElementById(\"ricomincia\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  ricomincia();\n})\n\ndocument.getElementById(\"conferma\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  leggiRisposta();\n})\n\n\ndocument.getElementById(\"positivo\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  let valore = document.getElementById(\"risposta\").value.replace(\"-\",\"\");\n  document.getElementById(\"risposta\").value = valore;\n})\n\n\ndocument.getElementById(\"negativo\").addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  let valore = document.getElementById(\"risposta\").value.replace(\"-\",\"\");\n  document.getElementById(\"risposta\").value = parseInt(`-${valore}`);\n})\n\n\ndocument.addEventListener('keyup', (event) => {\n  const keyName = event.key;\n  if (event.keyCode === 13) {\n    console.log(\"enter pressed\");\n    if(document.getElementById('domanda').classList.contains(\"show\")) document.getElementById(\"conferma\").click();\n  }\n}, false);\n\n\nconst setup = () => {\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  setTimeout(()=>{\n    numeroOperazioni = parseInt(window.prompt(\"quante operazioni vuoi?\", numeroOperazioni)) || numeroOperazioni;\n    numeroMassimoSommeSottrazioni = parseInt(window.prompt(\"per + e - numeri grandi fino a...\", numeroMassimoSommeSottrazioni)) || numeroMassimoSommeSottrazioni;\n    numeroMassimoMoltipliceEDivisioni = parseInt(window.prompt(\"per * e / secondo operatore < di...\", numeroMassimoMoltipliceEDivisioni)) || numeroMassimoMoltipliceEDivisioni;\n    secondiMaxPerOperazione = parseInt(window.prompt(\"tempo massimo per operazione in secondi?\", secondiMaxPerOperazione)) || secondiMaxPerOperazione;\n    inizia();\n  }, 100)\n}\n\n\nconst inizia = () => {\n  document.getElementById(\"inizia\").classList.add('d-none');\n  document.getElementById(\"ricomincia\").classList.remove('d-none');\n  count = numeroOperazioni;\n  faiDomanda();\n}\n\n\nconst ricomincia = () => {\n  ok = 0\n  ko = 0;\n  document.getElementById(\"inizia\").classList.toggle('d-none');\n  document.getElementById(\"ricomincia\").classList.toggle('d-none');\n  document.getElementById(\"operazioni\").replaceChildren(\"\");\n  inizia();\n}\n\nconst timerRisposta = () => {\n  let fineTimer = moment().add(secondiMaxPerOperazione, 'seconds');\n  timeoutInterval = setInterval(()=>{\n    const tempoRimanente = moment(fineTimer-moment()).format(\"mm:ss\");\n    const stingaTimer = `tempo rimanente ${tempoRimanente}s`;\n    for (const element of document.getElementsByClassName(\"timer\")){\n      element.innerText = stingaTimer;\n    }\n  }, 100)\n  timeoutTimer = setTimeout(()=>{\n    document.getElementById(\"conferma\").click();\n    clearInterval(timeoutInterval);\n  }, secondiMaxPerOperazione*1000)\n}\n\n\nconst calcolaRisultato = () => {\n  operazione = `${numero1}${operatore}${numero2}`;\n  risultato = eval(operazione).toFixed(1);\n}\n\nconst faiDomanda = () => {\n  operatore = operatori[Math.floor(Math.random()*operatori.length)];\n  const operatore1Massimo = numeroMassimoSommeSottrazioni;\n  const operatore2Massimo = [\"+\",\"-\"].indexOf(operatore) != -1 ? numeroMassimoSommeSottrazioni : numeroMassimoMoltipliceEDivisioni\n  numero1 = Math.round(Math.random()*operatore1Massimo);\n  numero2 = Math.round(Math.random()*operatore2Massimo);\n  //if([\"+\",\"-\",\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n  if([\"/\"].indexOf(operatore) != -1 && numero1<numero2) {\n    [numero1, numero2] = [numero2, numero1]\n  }\n  if(operatore == \"/\") {\n    calcolaRisultato();\n    const resto = risultato % 1;\n    if(resto > 0) {\n      numero1 = (numero1 % numero2)*numero2;\n    }\n    if(numero2==0) numero2 =1;\n  }\n  calcolaRisultato();\n  document.querySelector(\"#domanda .content\").innerText = operazione;\n  document.getElementById(\"risposta\").value = \"\";\n  document.querySelector(\"#domandaLabel\").innerText = `Domanda ${(numeroOperazioni-count)+1}`\n  if(!document.getElementById('domanda').classList.contains(\"show\")) domandaModal.show();\n  document.querySelector(\"#risposta\").focus();\n  console.log(`${operazione} = ${risultato}`);\n  clearTimeout(timeoutTimer);\n  inizioTimer = moment();\n  timerRisposta();\n}\n\n\nconst leggiRisposta = () => {\n  const risposta = document.querySelector(\"#risposta\").value;\n  mostraRisposta(operazione, risultato, risposta);\n  aggiornaStato();\n  count --;\n  if(count>0) {\n    setTimeout(() => faiDomanda(), 0);\n  } else {\n    domandaModal.hide();\n  }\n  clearTimeout(timeoutTimer);\n  clearInterval(timeoutInterval);\n}\n\n\nconst mostraRisposta = (operazione, risultato, risposta ) => {\n  let classeRisposta = \"bg-success\";\n  let suggerimenti = \"\";\n  if(parseFloat(risposta) == risultato){\n    ok ++;\n  } else {\n    ko ++;\n    classeRisposta = \"bg-danger\";\n    suggerimenti = ` ${risultato}`\n  }\n  const html = `\n    <div class=\"row mb-2\">\n      <div class=\"col-12 fs-4\">${operazione} = <span class=\"badge ${classeRisposta}\">${risposta}</span>${suggerimenti}</div>\n    </div>\n  `;\n  document.getElementById(\"operazioni\").insertAdjacentHTML('beforeend', html);\n}\n\n\nconst aggiornaStato = () => {\n  const percentuale = (ok/numeroOperazioni*100).toFixed()\n  document.getElementById(\"stato\").innerText = `indovinate ${ok} su ${numeroOperazioni}, pari a ${percentuale}%`;\n}"],"names":["ok","ko","numeroOperazioni","numeroMassimoSommeSottrazioni","numeroMassimoMoltipliceEDivisioni","secondiMaxPerOperazione","count","domanda","bootstrap","Modal","document","getElementById","risultato","operatore","operatori","operazione","numero1","numero2","inizioTimer","timeoutInterval","timeoutTimer","domandaModal","backdrop","keyboard","addEventListener","e","preventDefault","setup","ricomincia","leggiRisposta","valore","value","replace","parseInt","event","key","keyCode","console","log","classList","contains","click","toggle","setTimeout","window","prompt","inizia","add","remove","faiDomanda","replaceChildren","timerRisposta","fineTimer","moment","setInterval","stingaTimer","format","element","getElementsByClassName","innerText","clearInterval","calcolaRisultato","eval","toFixed","Math","floor","random","length","operatore1Massimo","operatore2Massimo","indexOf","round","querySelector","show","focus","clearTimeout","risposta","mostraRisposta","aggiornaStato","hide","operazione1","risultato1","classeRisposta","suggerimenti","parseFloat","html","insertAdjacentHTML","percentuale"],"version":3,"file":"index.f9c61119.js.map"}